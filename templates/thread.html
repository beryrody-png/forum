{% extends "base.html" %}

{% block title %}Тред №{{ thread[0] }}{% endblock %}

{% block content %}
    <h2>/{{ thread[1] }}/ - {{ board_name }}</h2>

    <div class="thread">
        <div class="post">
            <div class="post-header">
                <span class="post-id">OP №{{ thread[0] }}</span>
                <span>{{ thread[5] }}</span>
            </div>

            {% if thread[4] %}
                <img src="{{ url_for('uploaded_file', filename=thread[4]) }}" class="post-image" alt="">
            {% endif %}

            <div class="thread-title">{{ thread[2] }}</div>
            <div class="post-content">{{ thread[3] }}</div>
        </div>

        {% for reply in replies %}
            <div class="post">
                <div class="post-header">
                    <span class="post-id">№{{ reply[0] }}</span>
                    <span>{{ reply[4] }}</span>
                </div>

                {% if reply[3] %}
                    <img src="{{ url_for('uploaded_file', filename=reply[3]) }}" class="post-image" alt="">
                {% endif %}

                <div class="post-content">{{ reply[2] }}</div>
            </div>
        {% endfor %}
    </div>

    <div class="reply-form">
        <h3>Ответить</h3>
        <form action="{{ url_for('reply', thread_id=thread[0]) }}" method="post" enctype="multipart/form-data">
            <textarea name="content" required></textarea>
            <div class="file-input">
                <input type="file" name="file">
                <small>Макс. размер: 2MB (JPG, PNG, GIF)</small>
            </div>
            <button type="submit">Отправить</button>
        </form>
    </div>
{% endblock %}